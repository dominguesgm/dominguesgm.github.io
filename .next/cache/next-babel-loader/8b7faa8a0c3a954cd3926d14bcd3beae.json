{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { PerspectiveCamera } from 'three';\nvar cameraOptions = {\n  fov: 45,\n  near: 0.1,\n  far: 10000\n};\n\nvar Camera = function Camera() {\n  var _this = this;\n\n  _classCallCheck(this, Camera);\n\n  _defineProperty(this, \"instance\", null);\n\n  _defineProperty(this, \"zDepth\", void 0);\n\n  _defineProperty(this, \"updateZDepth\", function () {\n    var splitAngle = cameraOptions.fov / 2; // Use tangent formula to find adjacent side\n\n    _this.zDepth = -window.innerHeight / (Math.abs(Math.tan(splitAngle * Math.PI / 180)) * 2);\n  });\n\n  _defineProperty(this, \"animate\", function (time) {\n    // Transition animation details\n    var startTime = 0;\n    var duration = 2000;\n    var finalTime = startTime + duration;\n    var finalYPosition = 0;\n    var finalZPosition = 0; // Entry transition\n\n    if (time < finalTime) {\n      var progress = Math.max((time - startTime) / duration, 0); // Translate along y axis\n\n      var distanceToCover = window.innerHeight; // Ease out quad formula\n      // const easingProgress =  progress * (2 - progress);\n      // Ease in out quad formula\n\n      var easingProgress = progress < .5 ? 2 * progress * progress : -1 + (4 - 2 * progress) * progress;\n      var position = distanceToCover - easingProgress * distanceToCover;\n      _this.instance.position.y = position;\n      return {\n        isDone: false\n      };\n    } else {\n      var heightThreshold = window.innerHeight;\n      var scrollProgress = window.scrollY / heightThreshold;\n      finalZPosition = _this.instance.position.z + (scrollProgress * _this.zDepth - _this.instance.position.z) * 0.1;\n    }\n\n    _this.instance.position.y = finalYPosition;\n    _this.instance.position.z = finalZPosition;\n    return {\n      isDone: true\n    };\n  });\n\n  _defineProperty(this, \"handleResize\", function () {\n    _this.instance.aspect = window.innerWidth / window.innerHeight;\n\n    _this.instance.updateProjectionMatrix();\n\n    _this.updateZDepth();\n  });\n\n  this.instance = new PerspectiveCamera(cameraOptions.fov, window.innerWidth / window.innerHeight, cameraOptions.near, cameraOptions.far);\n  this.updateZDepth();\n};\n\nexport default Camera;","map":{"version":3,"sources":["/Users/gil/Projects/dominguesgm.github.io/src/shared/components/canvas/components/camera/Camera.js"],"names":["PerspectiveCamera","cameraOptions","fov","near","far","Camera","splitAngle","zDepth","window","innerHeight","Math","abs","tan","PI","time","startTime","duration","finalTime","finalYPosition","finalZPosition","progress","max","distanceToCover","easingProgress","position","instance","y","isDone","heightThreshold","scrollProgress","scrollY","z","aspect","innerWidth","updateProjectionMatrix","updateZDepth"],"mappings":";;AAAA,SACCA,iBADD,QAEO,OAFP;AAIA,IAAMC,aAAa,GAAG;AACrBC,EAAAA,GAAG,EAAE,EADgB;AAErBC,EAAAA,IAAI,EAAE,GAFe;AAGrBC,EAAAA,GAAG,EAAE;AAHgB,CAAtB;;IAMMC,M,GAIL,kBAAc;AAAA;;AAAA;;AAAA,oCAHH,IAGG;;AAAA;;AAAA,wCAWC,YAAM;AACpB,QAAMC,UAAU,GAAGL,aAAa,CAACC,GAAd,GAAkB,CAArC,CADoB,CAGpB;;AACA,IAAA,KAAI,CAACK,MAAL,GAAc,CAAEC,MAAM,CAACC,WAAT,IAAyBC,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,GAAL,CAASN,UAAU,GAACI,IAAI,CAACG,EAAhB,GAAmB,GAA5B,CAAT,IAA6C,CAAtE,CAAd;AACA,GAhBa;;AAAA,mCAkBJ,UAACC,IAAD,EAAU;AAEnB;AACA,QAAMC,SAAS,GAAG,CAAlB;AACA,QAAMC,QAAQ,GAAG,IAAjB;AACA,QAAMC,SAAS,GAAGF,SAAS,GAAGC,QAA9B;AACA,QAAME,cAAc,GAAG,CAAvB;AACA,QAAIC,cAAc,GAAG,CAArB,CAPmB,CASnB;;AACA,QAAGL,IAAI,GAAGG,SAAV,EAAqB;AACpB,UAAMG,QAAQ,GAAGV,IAAI,CAACW,GAAL,CAAU,CAACP,IAAI,GAAGC,SAAR,IAAqBC,QAA/B,EAA0C,CAA1C,CAAjB,CADoB,CAGpB;;AACA,UAAMM,eAAe,GAAGd,MAAM,CAACC,WAA/B,CAJoB,CAMpB;AACA;AACA;;AACA,UAAMc,cAAc,GAAGH,QAAQ,GAAG,EAAX,GACtB,IAAIA,QAAJ,GAAeA,QADO,GAEtB,CAAC,CAAD,GAAK,CAAC,IAAI,IAAIA,QAAT,IAAqBA,QAF3B;AAIA,UAAMI,QAAQ,GAAGF,eAAe,GAAGC,cAAc,GAAGD,eAApD;AACA,MAAA,KAAI,CAACG,QAAL,CAAcD,QAAd,CAAuBE,CAAvB,GAA2BF,QAA3B;AAEA,aAAO;AACNG,QAAAA,MAAM,EAAE;AADF,OAAP;AAGA,KAnBD,MAmBO;AACN,UAAMC,eAAe,GAAGpB,MAAM,CAACC,WAA/B;AACA,UAAMoB,cAAc,GAAGrB,MAAM,CAACsB,OAAP,GAAiBF,eAAxC;AACAT,MAAAA,cAAc,GAAG,KAAI,CAACM,QAAL,CAAcD,QAAd,CAAuBO,CAAvB,GAA2B,CAACF,cAAc,GAAG,KAAI,CAACtB,MAAtB,GAA+B,KAAI,CAACkB,QAAL,CAAcD,QAAd,CAAuBO,CAAvD,IAA4D,GAAxG;AACA;;AAED,IAAA,KAAI,CAACN,QAAL,CAAcD,QAAd,CAAuBE,CAAvB,GAA2BR,cAA3B;AACA,IAAA,KAAI,CAACO,QAAL,CAAcD,QAAd,CAAuBO,CAAvB,GAA2BZ,cAA3B;AAEA,WAAO;AACNQ,MAAAA,MAAM,EAAE;AADF,KAAP;AAGA,GA3Da;;AAAA,wCA6DC,YAAM;AACpB,IAAA,KAAI,CAACF,QAAL,CAAcO,MAAd,GAAuBxB,MAAM,CAACyB,UAAP,GAAoBzB,MAAM,CAACC,WAAlD;;AACA,IAAA,KAAI,CAACgB,QAAL,CAAcS,sBAAd;;AACA,IAAA,KAAI,CAACC,YAAL;AACA,GAjEa;;AACb,OAAKV,QAAL,GAAgB,IAAIzB,iBAAJ,CACfC,aAAa,CAACC,GADC,EAEfM,MAAM,CAACyB,UAAP,GAAoBzB,MAAM,CAACC,WAFZ,EAGfR,aAAa,CAACE,IAHC,EAIfF,aAAa,CAACG,GAJC,CAAhB;AAOA,OAAK+B,YAAL;AACA,C;;AA2DF,eAAe9B,MAAf","sourcesContent":["import {\n\tPerspectiveCamera,\n} from 'three';\n\nconst cameraOptions = {\n\tfov: 45,\n\tnear: 0.1,\n\tfar: 10000,\n};\n\nclass Camera {\n\tinstance = null;\n\tzDepth;\n\n\tconstructor() {\n\t\tthis.instance = new PerspectiveCamera(\n\t\t\tcameraOptions.fov,\n\t\t\twindow.innerWidth / window.innerHeight,\n\t\t\tcameraOptions.near,\n\t\t\tcameraOptions.far\n\t\t);\n\n\t\tthis.updateZDepth();\n\t}\n\n\tupdateZDepth = () => {\n\t\tconst splitAngle = cameraOptions.fov/2;\n\n\t\t// Use tangent formula to find adjacent side\n\t\tthis.zDepth = -(window.innerHeight) / (Math.abs(Math.tan(splitAngle*Math.PI/180)) * 2);\n\t};\n\n\tanimate = (time) => {\n\n\t\t// Transition animation details\n\t\tconst startTime = 0;\n\t\tconst duration = 2000;\n\t\tconst finalTime = startTime + duration;\n\t\tconst finalYPosition = 0;\n\t\tlet finalZPosition = 0;\n\n\t\t// Entry transition\n\t\tif(time < finalTime) {\n\t\t\tconst progress = Math.max(((time - startTime) / duration), 0);\n\n\t\t\t// Translate along y axis\n\t\t\tconst distanceToCover = window.innerHeight;\n\n\t\t\t// Ease out quad formula\n\t\t\t// const easingProgress =  progress * (2 - progress);\n\t\t\t// Ease in out quad formula\n\t\t\tconst easingProgress = progress < .5 ?\n\t\t\t\t2 * progress * progress :\n\t\t\t\t-1 + (4 - 2 * progress) * progress;\n\n\t\t\tconst position = distanceToCover - easingProgress * distanceToCover;\n\t\t\tthis.instance.position.y = position;\n\n\t\t\treturn {\n\t\t\t\tisDone: false,\n\t\t\t};\n\t\t} else {\n\t\t\tconst heightThreshold = window.innerHeight;\n\t\t\tconst scrollProgress = window.scrollY / heightThreshold;\n\t\t\tfinalZPosition = this.instance.position.z + (scrollProgress * this.zDepth - this.instance.position.z) * 0.1;\n\t\t}\n\n\t\tthis.instance.position.y = finalYPosition;\n\t\tthis.instance.position.z = finalZPosition;\n\n\t\treturn {\n\t\t\tisDone: true,\n\t\t};\n\t}\n\n\thandleResize = () => {\n\t\tthis.instance.aspect = window.innerWidth / window.innerHeight;\n\t\tthis.instance.updateProjectionMatrix();\n\t\tthis.updateZDepth();\n\t}\n}\n\nexport default Camera;\n"]},"metadata":{},"sourceType":"module"}